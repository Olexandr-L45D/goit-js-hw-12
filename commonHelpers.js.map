{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixaday-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// запит фечь з бібліотеки за допомогою axios і асинхронної функції async/await\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';//тут посилання на базовий УРЛ\nconst API_KEY = \"44760113-b733d2f51a4c6409aa3483a05\";\naxios.defaults.headers.common[\"hits\"] = API_KEY; // назва заголовка\n\n//   // return (await axios.get(`${urlRaqeuestes}&${searchParams}`)).data\n// такий варіант передачі KEY та параметрів\n      const searchSettings = {\n        key: '44760113-b733d2f51a4c6409aa3483a05',\n        q: '',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n      };\n      \n      export function generateSearchstr(searchText) {\n        searchSettings.q = searchText;\n        const neWurls = new URLSearchParams(searchSettings);\n        return `https://pixabay.com/api/?${neWurls}`;\n    }\n     \n    async function getAsyncImage(searchText) {\n      //return fetch(qveryURL)\n        return (await axios.get(`key=${API_KEY}&${searchText}`)).data\n    }\n      \n     export {getAsyncImage}\n\n      // export function getAsyncImage(qveryURL) {\n      //   return fetch(qveryURL).then(response => {\n      //     if (!response.ok) {\n      //       throw new Error(response.status);\n      //     }\n      //     return response.json();\n      //   });\n      // }\n\n // далі треба використати клас URLSearchParams (_limit: 15,)\n// це ліміт на 15 зображень в одному запиті(на базі прототипу URLSearchParams )\n// const searchParams = new URLSearchParams({\n//     _limit: 15,\n//     _sort: \"name\",\n//   });\n      // neWurls = {\n      //   _limit: 15,\n      //   _sort: \"q\",\n      // }\n\n\n  // export function getImage(str) {\n  //   const BaSe_URL =\"https://pixabay.com/api/\";\n  //   const API_KEY = \"44760113-b733d2f51a4c6409aa3483a05\";\n  //   const imageType = 'photo';\n  //   const orientat = \"horizontal\";\n  //   const safesearch = true;\n  //   const urlRaqeuestes = `${BaSe_URL}?key=${API_KEY}&q=${str}&image_type${imageType}&orientation=${orientat}&safesearch=${safesearch}`\n  //   return fetch(urlRaqeuestes).then(response => { \n  //       //console.log(response); \n  //       if (!response.ok) {\n  //         throw new Error(response.status); \n  //       }\n  //       return response.json(); \n  //     }\n  //     );}\n\n\n   ","//2 functions more\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\niziToast.settings({\n  timeout: 2500,\n  resetOnHover: true,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topRight',\n  titleSize: 25,\n  messageSize: 25,\n  backgroundColor: 'rgba(255, 182, 66, 0.8)',\n});\nvar lightbox = new SimpleLightbox('.gallery a', { captionDelay: 200, captionsData: 'alt'  });\n\nexport const refs = {\n  formSearchImage: document.querySelector(\".uzers-form-image\"),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n};\n\nconst galleryContainer = document.querySelector('.gallery'); // function створює розмітку для галереї\ngalleryContainer.addEventListener('submit', renderGalleryMarkap);\n\n   export function renderGalleryMarkap(images) {\n    const element = document.getElementsByClassName(\".gallery\");\n    element.innerHTML = \"\";\n    const markup = images\n    .map((image) =>  \n      ` \n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.name}\"/></a>\n    <div class=\"gallery-paragraf\">\n    <p class=\"gallery-commant\">likes ${image.likes}</p>\n    <p class=\"gallery-commant\">views ${image.views}</p>\n    <p class=\"gallery-commant\">comments ${image.comments}</p>\n    <p class=\"gallery-commant\">downloads ${image.downloads}</p>\n    </div>\n    </li> \n     ` )\n      .join(\"\")\n      galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n      lightbox.refresh();\n      \n  };\n\n// функція виклика повідомлення про помилку and iziToast\n\nexport function handlerErrorUzer(error) {\n  switch (error)\n    {\n    case 'outdata':\n      iziToast.warning({\n        title: 'Error',\n        message: 'Введіть данні для пошуку!',\n      });\n      break;\n    case 'nodata':\n      iziToast.warning({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      break;\n    default:\n      iziToast.error({\n        title: 'Error',\n        message: 'Щось пішло не так. Ми працюемо над вирішенням питання!',\n      });\n      break;\n  }\n}","\n//import {getImage} from \"./js/pixaday-api\"\nimport {getAsyncImage, generateSearchstr} from \"./js/pixaday-api\"\n import {handlerErrorUzer, refs} from \"./js/render-functions\"\nimport {renderGalleryMarkap} from \"./js/render-functions\"\n//console.log(generateSearchstr);\n\n\nrefs.formSearchImage.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n    const form = event.currentTarget; // посилання на елемент форми\n    const photQueryValue = form.elements.searchQuery.value.toLowerCase().trim(); //значення яке написав користувач\n    const searchText = event.target.searchQuery.value.trim();\n  if (searchText === \"\") {\n    handlerErrorUzer('outdata');\n    return;\n  }\n     refs.gallery.innerHTML = '';\n     refs.loader.classList.add('loader');\n     getAsyncImage(generateSearchstr(searchText))// аналогія моєї передачі, але searchText-значення з pixaday-api (searchSettings.q = searchText;)\n     //getAsyncImage(photQueryValue)\n    //getImage(photQueryValue)// те саме!\n    .then(data => {\n      renderGalleryMarkap(data.hits)\n      refs.loader.classList.remove('loader');\n      if (data.totalHits === 0) {\n        handlerErrorUzer('nodata');  \n    }\n  }).catch(error => {\n    refs.loader.classList.remove('loader');\n    \n    handlerErrorUzer(error);\n          })\n    .finally(() => \n        form.reset()); //очистка тексту в інпуті\n    \n}\n\n"],"names":["axios","API_KEY","searchSettings","generateSearchstr","searchText","getAsyncImage","iziToast","lightbox","SimpleLightbox","refs","galleryContainer","renderGalleryMarkap","images","element","markup","image","handlerErrorUzer","error","onFormSubmit","event","form","data"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAU,qCAChBD,EAAM,SAAS,QAAQ,OAAO,KAAUC,EAIlC,MAAMC,EAAiB,CACrB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EAClB,EAEa,SAASC,EAAkBC,EAAY,CAC5C,OAAAF,EAAe,EAAIE,EAEZ,4BADS,IAAI,gBAAgBF,CAAc,CACR,EAC7C,CAED,eAAeG,EAAcD,EAAY,CAErC,OAAQ,MAAMJ,EAAM,IAAI,OAAOC,CAAO,IAAIG,CAAU,EAAE,GAAG,IAC5D,CCnBLE,EAAS,SAAS,CAChB,QAAS,KACT,aAAc,GACd,aAAc,UACd,cAAe,WACf,SAAU,WACV,UAAW,GACX,YAAa,GACb,gBAAiB,yBACnB,CAAC,EACD,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,IAAK,aAAc,KAAK,CAAG,EAEpF,MAAMC,EAAO,CAClB,gBAAiB,SAAS,cAAc,mBAAmB,EAC3D,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEMC,EAAmB,SAAS,cAAc,UAAU,EAC1DA,EAAiB,iBAAiB,SAAUC,CAAmB,EAErD,SAASA,EAAoBC,EAAQ,CAC3C,MAAMC,EAAU,SAAS,uBAAuB,UAAU,EAC1DA,EAAQ,UAAY,GACpB,MAAMC,EAASF,EACd,IAAKG,GACJ;AAAA;AAAA,oCAE8BA,EAAM,aAAa;AAAA,sCACjBA,EAAM,YAAY,UAAUA,EAAM,IAAI,YAAYA,EAAM,IAAI;AAAA;AAAA,uCAE3DA,EAAM,KAAK;AAAA,uCACXA,EAAM,KAAK;AAAA,0CACRA,EAAM,QAAQ;AAAA,2CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,MAGlD,EACD,KAAK,EAAE,EACRL,EAAiB,mBAAmB,YAAaI,CAAM,EACvDP,EAAS,QAAO,CAGtB,CAGO,SAASS,EAAiBC,EAAO,CACtC,OAAQA,EACV,CACI,IAAK,UACHX,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,2BACjB,CAAO,EACD,MACF,IAAK,SACHA,EAAS,QAAQ,CACf,MAAO,QACP,QACE,0EACV,CAAO,EACD,MACF,QACEA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wDACjB,CAAO,EACD,KACH,CACH,CCpEAG,EAAK,gBAAgB,iBAAiB,SAAUS,CAAY,EAE5D,SAASA,EAAaC,EAAO,CACzBA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACIC,EAAK,SAAS,YAAY,MAAM,YAAW,EAAG,KAAO,EAC5E,MAAMhB,EAAae,EAAM,OAAO,YAAY,MAAM,OACpD,GAAIf,IAAe,GAAI,CACrBY,EAAiB,SAAS,EAC1B,MACD,CACEP,EAAK,QAAQ,UAAY,GACzBA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCJ,EAAcF,EAAkBC,CAAU,CAAC,EAG3C,KAAKiB,GAAQ,CACZV,EAAoBU,EAAK,IAAI,EAC7BZ,EAAK,OAAO,UAAU,OAAO,QAAQ,EACjCY,EAAK,YAAc,GACrBL,EAAiB,QAAQ,CAEjC,CAAG,EAAE,MAAMC,GAAS,CAChBR,EAAK,OAAO,UAAU,OAAO,QAAQ,EAErCO,EAAiBC,CAAK,CAC1B,CAAW,EACN,QAAQ,IACLG,EAAK,MAAK,CAAE,CAEpB"}